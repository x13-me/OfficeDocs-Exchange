---
title: 'Disable or bypass anti-malware scanning: Exchange 2013 Help'
TOCTitle: Disable or bypass anti-malware scanning
ms:assetid: 6725c74b-b3ef-4259-9337-c739e9bf7b5d
ms:mtpsurl: https://technet.microsoft.com/en-us/library/JJ150526(v=EXCHG.150)
ms:contentKeyID: 47560030
ms.date: 12/09/2016
mtps_version: v=EXCHG.150
---

# Disable or bypass anti-malware scanning

 

_**Applies to:** Exchange Server 2013_


In Microsoft Exchange Server 2013, you can disable or bypass malware filtering of all email messages in transit on a server. This must be done on a Mailbox server.

You may want to disable Exchange 2013 malware filtering if you are using another product for malware filtering. When malware filtering is disabled, the Exchange malware agent is unhooked and not running, and engine updates are not kept up-to-date.


> [!IMPORTANT]
> Bypassing malware filtering should <EM>only</EM> be done when troubleshooting a problem. When malware filtering is bypassed, the Exchange malware agent remains hooked, and engine updates are kept up-to-date. However, malware filtering is skipped while you attempt to resolve whatever problems you are encountering. After you have finished troubleshooting, you should restore malware filtering.



## What do you need to know before you begin?

  - Estimated time to complete each procedure: 15 minutes

  - You can only use the Shell to perform this procedure.

  - Disabling or enabling malware filtering restarts the Microsoft Exchange Transport service on the server. This may temporarily disrupt mail flow in your organization.

  - Bypassing or restoring malware filtering doesn't require you to restart any services. However, changes to the setting may take up to 10 minutes to take effect.

  - If you have multiple Exchange servers performing malware filtering, you must perform these steps on each server.

  - You need to be assigned permissions before you can perform this procedure or procedures. To see what permissions you need, see the "Anti-malware" entry in the [Anti-spam and anti-malware permissions](anti-spam-and-anti-malware-permissions-exchange-2013-help.md) topic.

  - For information about keyboard shortcuts that may apply to the procedures in this topic, see [Keyboard shortcuts in the Exchange admin center](keyboard-shortcuts-in-the-exchange-admin-center-2013-help.md).


> [!TIP]
> Having problems? Ask for help in the Exchange forums. Visit the forums at <A href="https://go.microsoft.com/fwlink/p/?linkid=60612">Exchange Server</A>, <A href="https://go.microsoft.com/fwlink/p/?linkid=267542">Exchange Online</A>, or <A href="https://go.microsoft.com/fwlink/p/?linkid=285351">Exchange Online Protection</A>.



## What do you want to do?

## Use the Shell to disable malware filtering on a specific Exchange server

To disable malware filtering, run the following command:

```powershell
& $env:ExchangeInstallPath\Scripts\Disable-Antimalwarescanning.ps1
```

> [!NOTE]  
> To re-enable malware filtering, use <CODE>Enable-Antimalwarescanning.ps1</CODE> instead of <CODE>Disable-Antimalwarescanning.ps1</CODE>.



## How do you know this step worked?

To verify that malware filtering is disabled, run the following command and confirm that it returns a value of False:

```powershell
Get-TransportAgent "Malware Agent"
```

## Use the Shell to temporarily bypass malware filtering on a specific Exchange server


> [!IMPORTANT]  
> Bypassing malware filtering should <EM>only</EM> be done when troubleshooting a problem. You should restore malware filtering after you have finished troubleshooting.

To temporarily bypass malware filtering, run the following command:

```powershell
Set-MalwareFilteringServer <ServerIdentity> -BypassFiltering $true
```

To restore malware filtering, run the following command:

```powershell
Set-MalwareFilteringServer <ServerIdentity> -BypassFiltering $false
```

## How do you know this step worked?

To verify that malware filtering is being bypassed, run the following command and confirm that it returns a value of True:

```powershell
Get-MalwareFilteringServer | Format-List BypassFiltering
```

